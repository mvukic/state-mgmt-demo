import{a as Pe,b as Gt,c as _e,d as ke,e as qt,f as Kt,g as Ue,h as rt,i as ze,j as Le,k as tn,l as en}from"./chunk-N4A4G7PR.js";import{a as M,b as z}from"./chunk-R7WFDEQV.js";import{$b as Rt,A as J,Ab as De,B as D,D as ft,E as Pt,F as Ie,Fa as Y,Fb as $e,Ga as gt,Gb as H,H as pt,Hb as V,I as Re,Ib as He,Jb as Ve,K as _t,Kb as Xt,L as Te,Lb as St,M as Ae,Ma as Lt,Mb as Be,Na as $t,Nb as Ge,Oa as Et,Ob as qe,P as kt,Pa as nt,Pb as Ke,Qa as Me,Qb as Xe,Rb as Je,S as xe,Sb as Jt,T as be,Ta as Ht,Tb as It,U as Oe,Ub as Qe,V as Ce,Va as Vt,Vb as P,Wa as Bt,Wb as We,X as et,Xb as Ye,Y as lt,Ya as vt,Z as $,Zb as Ze,_ as Q,_a as je,_b as R,ac as b,ba as w,c as ut,ca as dt,db as Fe,f as he,fa as E,ga as S,h as me,i as ge,ia as Ne,ja as ht,k as Ee,l as ve,n as U,oa as Ut,pa as zt,pb as yt,qa as we,r as ye,s as x,ta as A,u as Dt,ua as mt,va as W,x as Se}from"./chunk-72ILX6JO.js";import{a as u,b as p,d as F,e as at,f as de}from"./chunk-JY5MMDH3.js";var B=He({source:"Auth",events:{login:V(),logout:Ve()}});function rr(t,e){if(t&1){let r=Ht();Et(0,"button",2),Vt("click",function(){Ut(r);let i=Bt();return zt(i.login())}),vt(1,"Login"),nt()}}function ir(t,e){if(t&1){let r=Ht();Et(0,"button",2),Vt("click",function(){Ut(r);let i=Bt();return zt(i.logout())}),vt(1,"Logout"),nt()}}var nn=(()=>{var e;let r=class{constructor(){at(this,e,void 0);de(this,e,S(P)),this.name=F(this,e).selectSignal(tn),this.isLoggedIn=F(this,e).selectSignal(en)}logout(){F(this,e).dispatch(B.logout())}login(){F(this,e).dispatch(B.login({name:"@user_name"}))}},t=r;return e=new WeakMap,(()=>{r.\u0275fac=function(o){return new(o||r)}})(),(()=>{r.\u0275cmp=Ne({type:r,selectors:[["app-root"]],standalone:!0,features:[Fe],decls:6,vars:3,consts:[[2,"background","black","color","white"],[3,"click",4,"ngIf"],[3,"click"]],template:function(o,s){o&1&&(Et(0,"div",0)(1,"span"),vt(2),nt(),Lt(3,rr,2,0,"button",1),Lt(4,ir,2,0,"button",1),nt(),Me(5,"router-outlet")),o&2&&(gt(2),je(" ",s.name(),""),gt(1),$t("ngIf",!s.isLoggedIn()),gt(1),$t("ngIf",s.isLoggedIn()))},dependencies:[Ue,De],encapsulation:2,changeDetection:0})})(),t})();var ot="PERFORM_ACTION",or="REFRESH",pn="RESET",ln="ROLLBACK",dn="COMMIT",hn="SWEEP",mn="TOGGLE_ACTION",gn="SET_ACTIONS_ACTIVE",En="JUMP_TO_STATE",vn="JUMP_TO_ACTION",ae="IMPORT_STATE",yn="LOCK_CHANGES",Sn="PAUSE_RECORDING",Z=class{constructor(e,r){if(this.action=e,this.timestamp=r,this.type=ot,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Qt=class{constructor(){this.type=or}},Wt=class{constructor(e){this.timestamp=e,this.type=pn}},Yt=class{constructor(e){this.timestamp=e,this.type=ln}},Zt=class{constructor(e){this.timestamp=e,this.type=dn}},te=class{constructor(){this.type=hn}},ee=class{constructor(e){this.id=e,this.type=mn}},rn=class{constructor(e,r,n=!0){this.start=e,this.end=r,this.active=n,this.type=gn}},ne=class{constructor(e){this.index=e,this.type=En}},re=class{constructor(e){this.actionId=e,this.type=vn}},ie=class{constructor(e){this.nextLiftedState=e,this.type=ae}},oe=class{constructor(e){this.status=e,this.type=yn}},se=class{constructor(e){this.status=e,this.type=Sn}},on=class{constructor(){this.maxAge=!1}},Ot=new A("@ngrx/store-devtools Options"),sn=new A("@ngrx/store-devtools Initial Config");function In(){return null}var sr="NgRx Store DevTools";function cr(t){let e={maxAge:!1,monitor:In,actionSanitizer:void 0,stateSanitizer:void 0,name:sr,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},r=typeof t=="function"?t():t,n=r.logOnly?{pause:!0,export:!0,test:!0}:!1,i=r.features||n||e.features;i.import===!0&&(i.import="custom");let o=Object.assign({},e,{features:i},r);if(o.maxAge&&o.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${o.maxAge}`);return o}function cn(t,e){return t.filter(r=>e.indexOf(r)<0)}function Rn(t){let{computedStates:e,currentStateIndex:r}=t;if(r>=e.length){let{state:i}=e[e.length-1];return i}let{state:n}=e[r];return n}function gi(t){return t.actionsById[t.nextActionId-1]}function it(t){return new Z(t,+Date.now())}function ar(t,e){return Object.keys(e).reduce((r,n)=>{let i=Number(n);return r[i]=Tn(t,e[i],i),r},{})}function Tn(t,e,r){return p(u({},e),{action:t(e.action,r)})}function ur(t,e){return e.map((r,n)=>({state:An(t,r.state,n),error:r.error}))}function An(t,e,r){return t(e,r)}function xn(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function fr(t,e,r,n){let i=[],o={},s=[];return t.stagedActionIds.forEach((c,m)=>{let l=t.actionsById[c];l&&(m&&ue(t.computedStates[m],l,e,r,n)||(o[c]=l,i.push(c),s.push(t.computedStates[m])))}),p(u({},t),{stagedActionIds:i,actionsById:o,computedStates:s})}function ue(t,e,r,n,i){let o=r&&!r(t,e.action),s=n&&!e.action.type.match(n.map(m=>an(m)).join("|")),c=i&&e.action.type.match(i.map(m=>an(m)).join("|"));return o||s||c}function an(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var Ct=(()=>{let e=class extends St{},t=e;return(()=>{e.\u0275fac=function(){let n;return function(o){return(n||(n=we(e)))(o||e)}}()})(),(()=>{e.\u0275prov=w({token:e,factory:e.\u0275fac})})(),t})(),At={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},ce=new A("@ngrx/store-devtools Redux Devtools Extension"),bn=(()=>{let _DevtoolsExtension=class{constructor(t,e,r){this.config=e,this.dispatcher=r,this.devtoolsExtension=t,this.createActionStreams()}notify(t,e){if(this.devtoolsExtension)if(t.type===ot){if(e.isLocked||e.isPaused)return;let r=Rn(e);if(xn(this.config)&&ue(r,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let n=this.config.stateSanitizer?An(this.config.stateSanitizer,r,e.currentStateIndex):r,i=this.config.actionSanitizer?Tn(this.config.actionSanitizer,t,e.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(i,n))}else{let r=p(u({},e),{stagedActionIds:e.stagedActionIds,actionsById:this.config.actionSanitizer?ar(this.config.actionSanitizer,e.actionsById):e.actionsById,computedStates:this.config.stateSanitizer?ur(this.config.stateSanitizer,e.computedStates):e.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,r,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new ut(t=>{let e=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=e,e.init(),e.subscribe(r=>t.next(r)),e.unsubscribe}):Ee}createActionStreams(){let t=this.createChangesObservable().pipe(Oe()),e=t.pipe(D(c=>c.type===At.START)),r=t.pipe(D(c=>c.type===At.STOP)),n=t.pipe(D(c=>c.type===At.DISPATCH),x(c=>this.unwrapAction(c.payload)),Pt(c=>c.type===ae?this.dispatcher.pipe(D(m=>m.type===Jt),ye(1e3),Ie(1e3),x(()=>c),ft(()=>U(c)),pt(1)):U(c))),o=t.pipe(D(c=>c.type===At.ACTION),x(c=>this.unwrapAction(c.payload))).pipe(lt(r)),s=n.pipe(lt(r));this.start$=e.pipe(lt(r)),this.actions$=this.start$.pipe(et(()=>o)),this.liftedActions$=this.start$.pipe(et(()=>s))}unwrapAction(action){return typeof action=="string"?eval(`(${action})`):action}getExtensionConfig(t){let e={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(e.maxAge=t.maxAge),e}sendToReduxDevtools(t){try{t()}catch(e){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",e)}}},DevtoolsExtension=_DevtoolsExtension;return(()=>{_DevtoolsExtension.\u0275fac=function(e){return new(e||_DevtoolsExtension)(E(ce),E(Ot),E(Ct))}})(),(()=>{_DevtoolsExtension.\u0275prov=w({token:_DevtoolsExtension,factory:_DevtoolsExtension.\u0275fac})})(),DevtoolsExtension})(),bt={type:Xt},pr="@ngrx/store-devtools/recompute",lr={type:pr};function On(t,e,r,n,i){if(n)return{state:r,error:"Interrupted by an error up the chain"};let o=r,s;try{o=t(r,e)}catch(c){s=c.toString(),i.handleError(c)}return{state:o,error:s}}function xt(t,e,r,n,i,o,s,c,m){if(e>=t.length&&t.length===o.length)return t;let l=t.slice(0,e),I=o.length-(m?1:0);for(let a=e;a<I;a++){let h=o[a],O=i[h].action,d=l[a-1],f=d?d.state:n,_=d?d.error:void 0,k=s.indexOf(h)>-1?d:On(r,O,f,_,c);l.push(k)}return m&&l.push(t[t.length-1]),l}function dr(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:it(bt)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function hr(t,e,r,n,i={}){return o=>(s,c)=>{let{monitorState:m,actionsById:l,nextActionId:I,stagedActionIds:a,skippedActionIds:h,committedState:O,currentStateIndex:d,computedStates:f,isLocked:_,isPaused:C}=s||e;s||(l=Object.create(l));function k(y){let g=y,N=a.slice(1,g+1);for(let j=0;j<N.length;j++)if(f[j+1].error){g=j,N=a.slice(1,g+1);break}else delete l[N[j]];h=h.filter(j=>N.indexOf(j)===-1),a=[0,...a.slice(g+1)],O=f[g].state,f=f.slice(g),d=d>g?d-g:0}function X(){l={0:it(bt)},I=1,a=[0],h=[],O=f[d].state,d=0,f=[]}let v=0;switch(c.type){case yn:{_=c.status,v=1/0;break}case Sn:{C=c.status,C?(a=[...a,I],l[I]=new Z({type:"@ngrx/devtools/pause"},+Date.now()),I++,v=a.length-1,f=f.concat(f[f.length-1]),d===a.length-2&&d++,v=1/0):X();break}case pn:{l={0:it(bt)},I=1,a=[0],h=[],O=t,d=0,f=[];break}case dn:{X();break}case ln:{l={0:it(bt)},I=1,a=[0],h=[],d=0,f=[];break}case mn:{let{id:y}=c;h.indexOf(y)===-1?h=[y,...h]:h=h.filter(N=>N!==y),v=a.indexOf(y);break}case gn:{let{start:y,end:g,active:N}=c,j=[];for(let Ft=y;Ft<g;Ft++)j.push(Ft);N?h=cn(h,j):h=[...h,...j],v=a.indexOf(y);break}case En:{d=c.index,v=1/0;break}case vn:{let y=a.indexOf(c.actionId);y!==-1&&(d=y),v=1/0;break}case hn:{a=cn(a,h),h=[],d=Math.min(d,a.length-1);break}case ot:{if(_)return s||e;if(C||s&&ue(s.computedStates[d],c,i.predicate,i.actionsSafelist,i.actionsBlocklist)){let g=f[f.length-1];f=[...f.slice(0,-1),On(o,c.action,g.state,g.error,r)],v=1/0;break}i.maxAge&&a.length===i.maxAge&&k(1),d===a.length-1&&d++;let y=I++;l[y]=c,a=[...a,y],v=a.length-1;break}case ae:{({monitorState:m,actionsById:l,nextActionId:I,stagedActionIds:a,skippedActionIds:h,committedState:O,currentStateIndex:d,computedStates:f,isLocked:_,isPaused:C}=c.nextLiftedState);break}case Xt:{v=0,i.maxAge&&a.length>i.maxAge&&(f=xt(f,v,o,O,l,a,h,r,C),k(a.length-i.maxAge),v=1/0);break}case Jt:{if(f.filter(g=>g.error).length>0)v=0,i.maxAge&&a.length>i.maxAge&&(f=xt(f,v,o,O,l,a,h,r,C),k(a.length-i.maxAge),v=1/0);else{if(!C&&!_){d===a.length-1&&d++;let g=I++;l[g]=new Z(c,+Date.now()),a=[...a,g],v=a.length-1,f=xt(f,v,o,O,l,a,h,r,C)}f=f.map(g=>p(u({},g),{state:o(g.state,lr)})),d=a.length-1,i.maxAge&&a.length>i.maxAge&&k(a.length-i.maxAge),v=1/0}break}default:{v=1/0;break}}return f=xt(f,v,o,O,l,a,h,r,C),m=n(m,c),{monitorState:m,actionsById:l,nextActionId:I,stagedActionIds:a,skippedActionIds:h,committedState:O,currentStateIndex:d,computedStates:f,isLocked:_,isPaused:C}}}var un=(()=>{let e=class{constructor(n,i,o,s,c,m,l,I){let a=dr(l,I.monitor),h=hr(l,a,m,I.monitor,I),O=J(J(i.asObservable().pipe(Ce(1)),s.actions$).pipe(x(it)),n,s.liftedActions$).pipe(ve(ge)),d=o.pipe(x(h)),f=new me(1),_=O.pipe(Q(d),be(({state:v},[y,g])=>{let N=g(v,y);return y.type!==ot&&xn(I)&&(N=fr(N,I.predicate,I.actionsSafelist,I.actionsBlocklist)),s.notify(y,N),{state:N,action:y}},{state:a,action:null})).subscribe(({state:v,action:y})=>{if(f.next(v),y.type===ot){let g=y.action;c.next(g)}}),C=s.start$.subscribe(()=>{this.refresh()}),k=f.asObservable(),X=k.pipe(x(Rn));Object.defineProperty(X,"state",{value:$e(X,{manualCleanup:!0,requireSync:!0})}),this.extensionStartSubscription=C,this.stateSubscription=_,this.dispatcher=n,this.liftedState=k,this.state=X}dispatch(n){this.dispatcher.next(n)}next(n){this.dispatcher.next(n)}error(n){}complete(){}performAction(n){this.dispatch(new Z(n,+Date.now()))}refresh(){this.dispatch(new Qt)}reset(){this.dispatch(new Wt(+Date.now()))}rollback(){this.dispatch(new Yt(+Date.now()))}commit(){this.dispatch(new Zt(+Date.now()))}sweep(){this.dispatch(new te)}toggleAction(n){this.dispatch(new ee(n))}jumpToAction(n){this.dispatch(new re(n))}jumpToState(n){this.dispatch(new ne(n))}importState(n){this.dispatch(new ie(n))}lockChanges(n){this.dispatch(new oe(n))}pauseRecording(n){this.dispatch(new se(n))}},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)(E(Ct),E(St),E(Xe),E(bn),E(It),E(Y),E(Be),E(Ot))}})(),(()=>{e.\u0275prov=w({token:e,factory:e.\u0275fac})})(),t})(),mr=new A("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function gr(t,e){return!!t||e.monitor!==In}function Er(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function fe(t={}){return W([bn,Ct,un,{provide:sn,useValue:t},{provide:mr,deps:[ce,Ot],useFactory:gr},{provide:ce,useFactory:Er},{provide:Ot,deps:[sn],useFactory:cr},{provide:Qe,deps:[un],useFactory:vr},{provide:Je,useExisting:Ct}])}function vr(t){return t.state}var Ei=(()=>{let e=class{static instrument(n={}){return{ngModule:e,providers:[fe(n)]}}},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=ht({type:e})})(),(()=>{e.\u0275inj=dt({})})(),t})();var yr={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Nt="__@ngrx/effects_create__";function G(t,e={}){let r=e.functional?t:t(),n=u(u({},yr),e);return Object.defineProperty(r,Nt,{value:n}),r}function Sr(t){return Object.getOwnPropertyNames(t).filter(n=>t[n]&&t[n].hasOwnProperty(Nt)?t[n][Nt].hasOwnProperty("dispatch"):!1).map(n=>{let i=t[n][Nt];return u({propertyName:n},i)})}function Ir(t){return Sr(t)}function Cn(t){return Object.getPrototypeOf(t)}function Rr(t){return t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function Nn(t){return typeof t=="function"}function Tr(t){return t.filter(Nn)}function Ar(t,e,r){let n=Cn(t).constructor.name,i=Ir(t).map(({propertyName:o,dispatch:s,useEffectsErrorHandler:c})=>{let m=typeof t[o]=="function"?t[o]():t[o],l=c?r(m,e):m;return s===!1?l.pipe(Re()):l.pipe(xe()).pipe(x(a=>({effect:t[o],notification:a,propertyName:o,sourceName:n,sourceInstance:t})))});return J(...i)}var xr=10;function wn(t,e,r=xr){return t.pipe(ft(n=>(e&&e.handleError(n),r<=1?t:wn(t,e,r-1))))}var q=(()=>{let e=class extends ut{constructor(n){super(),n&&(this.source=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)(E(It))}})(),(()=>{e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"})})(),t})();function K(...t){return D(e=>t.some(r=>typeof r=="string"?r===e.type:r.type===e.type))}var ji=new A("@ngrx/effects Internal Root Guard"),Fi=new A("@ngrx/effects User Provided Effects"),Di=new A("@ngrx/effects Internal Root Effects"),Pi=new A("@ngrx/effects Internal Root Effects Instances"),_i=new A("@ngrx/effects Internal Feature Effects"),ki=new A("@ngrx/effects Internal Feature Effects Instance Groups"),br=new A("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>wn}),Or="@ngrx/effects/init",Cr=H(Or);function Nr(t,e){if(t.notification.kind==="N"){let r=t.notification.value;!wr(r)&&e.handleError(new Error(`Effect ${Mr(t)} dispatched an invalid action: ${jr(r)}`))}}function wr(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function Mr({propertyName:t,sourceInstance:e,sourceName:r}){let n=typeof e[t]=="function";return`"${r}.${String(t)}${n?"()":""}"`}function jr(t){try{return JSON.stringify(t)}catch{return t}}var Fr="ngrxOnIdentifyEffects";function Dr(t){return pe(t,Fr)}var Pr="ngrxOnRunEffects";function _r(t){return pe(t,Pr)}var kr="ngrxOnInitEffects";function Ur(t){return pe(t,kr)}function pe(t,e){return t&&e in t&&typeof t[e]=="function"}var Mn=(()=>{let e=class extends he{constructor(n,i){super(),this.errorHandler=n,this.effectsErrorHandler=i}addEffects(n){this.next(n)}toActions(){return this.pipe(kt(n=>Rr(n)?Cn(n):n),Dt(n=>n.pipe(kt(zr))),Dt(n=>{let i=n.pipe(Ae(s=>Lr(this.errorHandler,this.effectsErrorHandler)(s)),x(s=>(Nr(s,this.errorHandler),s.notification)),D(s=>s.kind==="N"&&s.value!=null),Te()),o=n.pipe(pt(1),D(Ur),x(s=>s.ngrxOnInitEffects()));return J(i,o)}))}},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)(E(Y),E(br))}})(),(()=>{e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"})})(),t})();function zr(t){return Dr(t)?t.ngrxOnIdentifyEffects():""}function Lr(t,e){return r=>{let n=Ar(r,t,e);return _r(r)?r.ngrxOnRunEffects(n):n}}var $r=(()=>{let e=class{get isStarted(){return!!this.effectsSubscription}constructor(n,i){this.effectSources=n,this.store=i,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)(E(Mn),E(P))}})(),(()=>{e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"})})(),t})();function jn(...t){let e=t.flat(),r=Tr(e);return W([r,{provide:mt,multi:!0,useValue:()=>{S(qe),S(Ke,{optional:!0});let n=S($r),i=S(Mn),o=!n.isStarted;o&&n.start();for(let s of e){let c=Nn(s)?S(s):s;i.addEffects(c)}o&&S(P).dispatch(Cr())}}])}var le=()=>({house:{id:"",name:""},people:[],rooms:[],viewed:!1});function st(t,e){return t.map(r=>r.id!==e.id?r:u(u({},r),e))}function ct(t,e){return[...t,e]}function tt(t,e){return t.filter(r=>r.id!==e)}function Fn(t,e,r){return t.rooms.map(n=>n.id!==e?u({},n):p(u({},n),{people:tt(n.people,r)}))}function Dn(t,e){return t.rooms.map(r=>p(u({},r),{people:tt(r.people,e)}))}function Pn(t,e,r){let n=t.find(i=>i.id===r);return e.map(i=>p(u({},i),{people:st(i.people,n)}))}function _n(t,e,r,n){let i=t.find(o=>o.id===n);return e.map(o=>o.id!==r?o:p(u({},o),{people:ct(o.people,i)}))}function kn(t){if(t.length===0)return[];let e=Math.floor(Math.random()*t.length);return[structuredClone(t[e])]}var Un=Rt(le(),R(b.create,(t,{name:e})=>p(u({},t),{house:{id:crypto.randomUUID(),name:e},viewed:!0})),R(b.init,(t,e)=>p(u({},t),{house:{id:e.id,name:e.name},viewed:!0})),R(b.update,(t,{name:e})=>p(u({},t),{house:p(u({},t.house),{name:e})})),R(b.close,()=>u({},le())),R(z.create,(t,{firstName:e,lastName:r})=>p(u({},t),{people:ct(t.people,{id:crypto.randomUUID(),firstName:e,lastName:r})})),R(z.update,(t,e)=>p(u({},t),{people:st(t.people,e)})),R(z.init,(t,{people:e})=>p(u({},t),{people:e})),R(z.delete,(t,{personId:e})=>p(u({},t),{people:tt(t.people,e),rooms:Dn(t,e)})),R(M.create,(t,{name:e,designation:r})=>p(u({},t),{rooms:ct(t.rooms,{id:crypto.randomUUID(),name:e,designation:r,people:kn(t.people)})})),R(M.init,(t,{rooms:e})=>p(u({},t),{rooms:e})),R(M.update,(t,e)=>p(u({},t),{rooms:st(t.rooms,e)})),R(M.delete,(t,{roomId:e})=>p(u({},t),{rooms:tt(t.rooms,e)})),R(M.removePerson,(t,{roomId:e,personId:r})=>p(u({},t),{rooms:Fn(t,e,r)})),R(M.updatePerson,(t,{personId:e})=>p(u({},t),{rooms:Pn(t.people,t.rooms,e)})),R(M.addPerson,(t,{roomId:e,personId:r})=>p(u({},t),{rooms:_n(t.people,t.rooms,e,r)})));var zn=()=>({name:"@user_name",loggedIn:!0});var Ln=Rt(zn(),R(B.logout,t=>p(u({},t),{name:"Anonymous",loggedIn:!1})),R(B.login,(t,{name:e})=>p(u({},t),{name:e,loggedIn:!0})));var $n=(()=>{var e;let r=class{constructor(){at(this,e,S(P))}createHouse(i){return U({id:crypto.randomUUID(),name:i}).pipe($(o=>F(this,e).dispatch(b.init(o))))}getHouse(i){return U({id:crypto.randomUUID(),name:`House ${i}`}).pipe(_t(1e3),$(o=>F(this,e).dispatch(b.init(o))))}getPeople(i){return U([{id:"b3bfe33f-775b-4ac4-a144-b61aad48cf9d",firstName:"a",lastName:"d"},{id:"957a081a-4bf2-43f7-af0f-925f6dbbc752",firstName:"b",lastName:"c"}]).pipe(_t(1e3),$(o=>F(this,e).dispatch(z.init({people:o}))))}getRooms(i){return U([{id:"e49f6093-d597-4fb9-a10d-ae4de58993dd",name:"ab",designation:"de",people:[]},{id:"d9cecf49-6add-43d4-9588-86abbbde4116",name:"bc",designation:"cd",people:[{id:"957a081a-4bf2-43f7-af0f-925f6dbbc752",firstName:"Person 2",lastName:"Person 2"}]}]).pipe($(o=>F(this,e).dispatch(M.init({rooms:o}))))}},t=r;return e=new WeakMap,(()=>{r.\u0275fac=function(o){return new(o||r)}})(),(()=>{r.\u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})})(),t})();var Hr=G((t=S(q),e=S(rt))=>t.pipe(K(b.create),$(()=>e.navigateByUrl("edit"))),{functional:!0,dispatch:!1}),Vr=G((t=S(q),e=S($n))=>t.pipe(K(b.open),et(({id:r})=>Se([e.getHouse(r),e.getPeople(r),e.getRooms(r)]))),{functional:!0,dispatch:!1}),Br=G((t=S(q),e=S(rt))=>t.pipe(K(b.close),$(()=>e.navigateByUrl("create"))),{functional:!0,dispatch:!1}),Hn={onCreate:Hr,onClose:Br,onOpen:Vr};var Gr=G((t=S(q))=>t.pipe(K(B.logout),x(()=>b.close())),{functional:!0,dispatch:!0}),Vn={onLogoutEffect:Gr};var qr=G((t=S(q))=>t.pipe(K(z.update),x(({id:e})=>M.updatePerson({personId:e}))),{functional:!0,dispatch:!0}),Bn={onUpdate:qr};var Xn="@ngrx/router-store/request",qo=H(Xn,V()),Jn="@ngrx/router-store/navigation",Ko=H(Jn,V()),Qn="@ngrx/router-store/cancel",Xo=H(Qn,V()),Wn="@ngrx/router-store/error",Jo=H(Wn,V()),Yn="@ngrx/router-store/navigated",Qo=H(Yn,V());var wt=class{serialize(e){return{root:this.serializeRoute(e.root),url:e.url}}serializeRoute(e){let r=e.children.map(n=>this.serializeRoute(n));return{params:e.params,data:e.data,url:e.url,outlet:e.outlet,title:e.title,routeConfig:e.routeConfig?{path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet,title:typeof e.routeConfig.title=="string"?e.routeConfig.title:void 0}:null,queryParams:e.queryParams,fragment:e.fragment,firstChild:r[0],children:r}}},L=(()=>(L=L||{},L[L.PreActivation=1]="PreActivation",L[L.PostActivation=2]="PostActivation",L))(),Kr="router",Gn=new A("@ngrx/router-store Internal Configuration"),Zn=new A("@ngrx/router-store Configuration");function Xr(t){return u({stateKey:Kr,serializer:wt,navigationActionTiming:L.PreActivation},t)}var Mt=class{serialize(e){return{root:this.serializeRoute(e.root),url:e.url}}serializeRoute(e){let r=e.children.map(n=>this.serializeRoute(n));return{params:e.params,paramMap:e.paramMap,data:e.data,url:e.url,outlet:e.outlet,title:e.title,routeConfig:e.routeConfig?{component:e.routeConfig.component,path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet,title:e.routeConfig.title}:null,queryParams:e.queryParams,queryParamMap:e.queryParamMap,fragment:e.fragment,component:e.routeConfig?e.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:r[0],pathFromRoot:void 0,children:r}}},jt=class{},T=(()=>(T=T||{},T[T.NONE=1]="NONE",T[T.ROUTER=2]="ROUTER",T[T.STORE=3]="STORE",T))(),qn=(()=>{let e=class{constructor(n,i,o,s,c,m){this.store=n,this.router=i,this.serializer=o,this.errorHandler=s,this.config=c,this.activeRuntimeChecks=m,this.lastEvent=null,this.routerState=null,this.trigger=T.NONE,this.stateKey=this.config.stateKey,!Ye()&&yt()&&(m?.strictActionSerializability||m?.strictStateSerializability)&&this.serializer instanceof Mt&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the FullRouterStateSerializer. The FullRouterStateSerializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}setUpStoreStateListener(){this.store.pipe(We(this.stateKey),Q(this.store)).subscribe(([n,i])=>{this.navigateIfNeeded(n,i)})}navigateIfNeeded(n,i){if(!n||!n.state||this.trigger===T.ROUTER||this.lastEvent instanceof Gt)return;let o=n.state.url;Jr(this.router.url,o)||(this.storeState=i,this.trigger=T.STORE,this.router.navigateByUrl(o).catch(s=>{this.errorHandler.handleError(s)}))}setUpRouterEventsListener(){let n=this.config.navigationActionTiming===L.PostActivation,i;this.router.events.pipe(Q(this.store)).subscribe(([o,s])=>{this.lastEvent=o,o instanceof Gt?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==T.STORE&&(this.storeState=s,this.dispatchRouterRequest(o))):o instanceof Kt?(i=o,!n&&this.trigger!==T.STORE&&this.dispatchRouterNavigation(o)):o instanceof ke?(this.dispatchRouterCancel(o),this.reset()):o instanceof qt?(this.dispatchRouterError(o),this.reset()):o instanceof _e&&(this.trigger!==T.STORE&&(n&&this.dispatchRouterNavigation(i),this.dispatchRouterNavigated(o)),this.reset())})}dispatchRouterRequest(n){this.dispatchRouterAction(Xn,{event:n})}dispatchRouterNavigation(n){let i=this.serializer.serialize(n.state);this.dispatchRouterAction(Jn,{routerState:i,event:new Kt(n.id,n.url,n.urlAfterRedirects,i)})}dispatchRouterCancel(n){this.dispatchRouterAction(Qn,{storeState:this.storeState,event:n})}dispatchRouterError(n){this.dispatchRouterAction(Wn,{storeState:this.storeState,event:new qt(n.id,n.url,`${n}`)})}dispatchRouterNavigated(n){let i=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(Yn,{event:n,routerState:i})}dispatchRouterAction(n,i){this.trigger=T.ROUTER;try{this.store.dispatch({type:n,payload:p(u({routerState:this.routerState},i),{event:this.config.routerState===0?i.event:{id:i.event.id,url:i.event.url,urlAfterRedirects:i.event.urlAfterRedirects}})})}finally{this.trigger=T.NONE}}reset(){this.trigger=T.NONE,this.storeState=null,this.routerState=null}},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)(E(P),E(rt),E(jt),E(Y),E(Zn),E(Ge))}})(),(()=>{e.\u0275prov=w({token:e,factory:e.\u0275fac})})(),t})();function Jr(t,e){return Kn(t)===Kn(e)}function Kn(t){return t?.length>0&&t[t.length-1]==="/"?t.substring(0,t.length-1):t}function tr(t={}){return W([{provide:Gn,useValue:t},{provide:Zn,useFactory:Xr,deps:[Gn]},{provide:jt,useClass:t.serializer?t.serializer:t.routerState===0?Mt:wt},{provide:mt,multi:!0,useFactory(){return()=>S(qn)}},qn])}var er=[{path:"create",loadComponent:()=>import("./create.component-CEVZMPRR.js")},{path:"edit/:id",loadComponent:()=>import("./edit.component-CRYBGR5H.js")},{path:"**",pathMatch:"full",redirectTo:"create"}];var nr={providers:[Ze({houseState:Un,authState:Ln}),jn(Hn,Bn,Vn),tr(),yt()?fe():[],ze(er,Le())]};Pe(nn,nr).catch(t=>console.log(t));
